<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>Notes</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#F9F5EC;
  --text:#222;
  --accent:#0066cc;
  --radius:28px;
  --nav-height:72px;
  --transition:.3s ease;
}
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
body{margin:0;font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);}
.view{position:absolute;inset:0;padding:calc(env(safe-area-inset-top)+16px)16px calc(env(safe-area-inset-bottom)+var(--nav-height)+16px)16px;overflow:auto;opacity:0;transform:translateX(20px);transition:opacity var(--transition),transform var(--transition);}
.view.active{opacity:1;transform:translateX(0);}
.card{background:#fff;border-radius:20px;padding:16px;margin-bottom:16px;box-shadow:0 2px 4px rgba(0,0,0,.04);}
nav.bottom{position:fixed;left:0;right:0;bottom:0;display:flex;justify-content:space-around;padding:8px calc(env(safe-area-inset-left)+16px) calc(env(safe-area-inset-bottom)+8px) calc(env(safe-area-inset-right)+16px);backdrop-filter:blur(20px);background:rgba(255,255,255,.6);z-index:10;}
.nav-btn{width:52px;height:52px;border-radius:26px;background:transparent;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:transform .15s;}
.nav-btn.active{background:rgba(0,0,0,.1);}
.nav-btn:active{transform:scale(.96);}
.material-symbols-rounded{font-size:28px;line-height:1;}
.search-pill{position:fixed;bottom:calc(env(safe-area-inset-bottom)+var(--nav-height)+12px);left:50%;transform:translateX(-50%);width:80%;max-width:360px;background:#fff;border-radius:var(--radius);box-shadow:0 2px 6px rgba(0,0,0,.1);display:flex;align-items:center;padding:0 16px;transition:transform .2s;}
.search-pill input{flex:1;border:none;background:transparent;padding:12px 0;font-size:16px;}
.search-pill input:focus{outline:none;}
button.pill{border:none;background:rgba(255,255,255,.6);backdrop-filter:blur(10px);border-radius:var(--radius);padding:12px 16px;font-size:16px;margin:0 4px;transition:transform .15s;}
button.pill:active{transform:scale(.96);}
.toolbar{display:flex;justify-content:flex-end;margin-top:16px;}
textarea{width:100%;min-height:160px;border:none;border-radius:16px;padding:12px;font-size:16px;resize:none;background:rgba(0,0,0,.04);}
textarea:focus, input:focus{outline:none;}
.segmented{display:flex;border-radius:var(--radius);overflow:hidden;margin-bottom:16px;}
.segmented button{flex:1;padding:12px;border:none;background:rgba(0,0,0,.06);}
.segmented button.active{background:rgba(0,0,0,.15);}
#toast{position:fixed;bottom:calc(env(safe-area-inset-bottom)+var(--nav-height)+20px);left:50%;transform:translate(-50%,20px);background:#000;color:#fff;padding:12px 16px;border-radius:16px;opacity:0;transition:opacity .3s,transform .3s;z-index:20;}
#toast.show{opacity:1;transform:translate(-50%,0);}
@media(prefers-reduced-motion:reduce){.view{transition:none;}nav.bottom{transition:none;}} 
</style>
</head>
<body>
<div id="toast" role="status" aria-live="polite"></div>
<main id="app">
<section id="homeView" class="view active" aria-label="Home"></section>
<section id="searchView" class="view" aria-label="Search"></section>
<section id="detailView" class="view" aria-label="Detail"></section>
<section id="editView" class="view" aria-label="Edit"></section>
<section id="settingsView" class="view" aria-label="Settings"></section>
</main>
<nav class="bottom" aria-label="Primary">
<button class="nav-btn" data-route="#home" aria-label="Home"><span class="material-symbols-rounded" aria-hidden="true">home</span></button>
<button class="nav-btn" data-route="#search" aria-label="Search"><span class="material-symbols-rounded" aria-hidden="true">search</span></button>
<button class="nav-btn" id="addBtn" aria-label="New"><span class="material-symbols-rounded" aria-hidden="true">add</span></button>
<button class="nav-btn" data-route="#settings" aria-label="Settings"><span class="material-symbols-rounded" aria-hidden="true">settings</span></button>
</nav>
<div class="search-pill" id="searchBar" hidden>
<span class="material-symbols-rounded" aria-hidden="true">search</span>
<input id="searchInput" type="search" placeholder="Search" aria-label="Search notes">
</div>
<script type="application/json" id="mockData">
{"notes":[{"id":"1","title":"Welcome","text":"Tap + to add"}]}
</script>
<script>
const state={notes:[],recents:[],prefs:{}};
const views={home:document.getElementById('homeView'),search:document.getElementById('searchView'),detail:document.getElementById('detailView'),edit:document.getElementById('editView'),settings:document.getElementById('settingsView')};
function load(){try{state.notes=JSON.parse(localStorage.getItem('notes'))||JSON.parse(document.getElementById('mockData').textContent).notes;}catch{state.notes=[];}renderHome();}
function save(){localStorage.setItem('notes',JSON.stringify(state.notes));}
function showToast(msg){const t=document.getElementById('toast');t.textContent=msg;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),2000);} 
function route(hash){location.hash=hash;}
window.addEventListener('hashchange',handleRoute);
function handleRoute(){const hash=location.hash||'#home';document.querySelectorAll('.view').forEach(v=>v.classList.remove('active'));document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));if(hash.startsWith('#detail/')){renderDetail(hash.split('/')[1]);views.detail.classList.add('active');}else if(hash==='#search'){renderSearch();views.search.classList.add('active');document.getElementById('searchBar').hidden=false;}else if(hash==='#create'){renderEdit();views.edit.classList.add('active');}else if(hash==='#settings'){renderSettings();views.settings.classList.add('active');}else{renderHome();views.home.classList.add('active');}const activeBtn=document.querySelector(`.nav-btn[data-route='${hash}']`);if(activeBtn)activeBtn.classList.add('active');document.getElementById('searchBar').hidden=hash!=='#search';}
function renderHome(){const home=views.home;if(!state.notes.length){home.innerHTML='<p>Empty. Tap +</p>';return;}home.innerHTML=state.notes.map(n=>`<div class="card" data-id="${n.id}"><h3>${n.title}</h3><p>${n.text.slice(0,40)}</p></div>`).join('');home.querySelectorAll('.card').forEach(c=>c.addEventListener('click',()=>route('#detail/'+c.dataset.id)));}
function renderSearch(){const list=state.notes.map(n=>`<div class='card' data-id='${n.id}'><h3>${n.title}</h3></div>`).join('');views.search.innerHTML=`<div id='results'>${list}</div>`;document.getElementById('searchInput').value='';filter('');document.getElementById('searchInput').oninput=e=>filter(e.target.value);function filter(q){const cards=[...views.search.querySelectorAll('.card')];cards.forEach(c=>{const note=state.notes.find(n=>n.id===c.dataset.id);const hit=note.title.toLowerCase().includes(q.toLowerCase())||note.text.toLowerCase().includes(q.toLowerCase());c.style.display=hit?'block':'none';});}}
function renderDetail(id){const note=state.notes.find(n=>n.id===id);views.detail.innerHTML=`<div class='card'><h2>${note.title}</h2><p>${note.text}</p><div class='toolbar'><button class='pill' id='favBtn'><span class='material-symbols-rounded' aria-hidden='true'>favorite</span></button><button class='pill' id='shareBtn'><span class='material-symbols-rounded' aria-hidden='true'>share</span></button></div></div>`;}
function renderEdit(id){const note=id?state.notes.find(n=>n.id===id):{title:'',text:''};views.edit.innerHTML=`<div class='card'><input id='titleInput' placeholder='Title' value='${note.title}'/><textarea id='textInput' placeholder='Note'>${note.text}</textarea><div class='toolbar'><button class='pill' id='saveBtn'>Save</button><button class='pill' id='cancelBtn'>Cancel</button></div></div>`;document.getElementById('cancelBtn').onclick=()=>route('#home');document.getElementById('saveBtn').onclick=()=>{const t=document.getElementById('titleInput').value.trim();const txt=document.getElementById('textInput').value.trim();if(!t){showToast('Title required');return;}if(id){note.title=t;note.text=txt;}else{state.notes.push({id:Date.now().toString(),title:t,text:txt});}save();route('#home');showToast('Saved');};}
function renderSettings(){views.settings.innerHTML=`<div class='card'><h3>Reset</h3><button class='pill' id='resetBtn'>Clear Data</button></div>`;document.getElementById('resetBtn').onclick=()=>{localStorage.clear();location.reload();};}
// nav handlers
Array.from(document.querySelectorAll('.nav-btn[data-route]')).forEach(b=>b.addEventListener('click',()=>route(b.dataset.route)));
document.getElementById('addBtn').addEventListener('click',()=>route('#create'));
load();handleRoute();
</script>
</body>
</html>
